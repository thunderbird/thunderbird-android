<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Testing Guide - Thunderbird for Android - Developer Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Developer Documentation for the Thunderbird for Android project.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../assets/theme/last-changed.css">
        <link rel="stylesheet" href="../assets/theme/navigation.css">
        <link rel="stylesheet" href="../assets/theme/pagetoc.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Thunderbird for Android - Developer Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/thunderbird/thunderbird-android" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/thunderbird/thunderbird-android/edit/main/./contributing/testing-guide.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="-testing-guide"><a class="header" href="#-testing-guide">🧪 Testing Guide</a></h1>
<p>This document outlines the testing practices and guidelines for the Thunderbird for Android project.</p>
<p><strong>Key Testing Principles:</strong></p>
<ul>
<li>Follow the Arrange-Act-Assert (AAA) pattern</li>
<li>Use descriptive test names</li>
<li>Prefer fake implementations over mocks</li>
<li>Name the object under test as <code>testSubject</code></li>
<li>Use <a href="https://github.com/willowtreeapps/assertk" title="" target="_blank">AssertK</a> for assertions</li>
</ul>
<h2 id="-test-structure"><a class="header" href="#-test-structure">📐 Test Structure</a></h2>
<h3 id="-arrange-act-assert-pattern"><a class="header" href="#-arrange-act-assert-pattern">🔍 Arrange-Act-Assert Pattern</a></h3>
<p>Tests in this project should follow the Arrange-Act-Assert (AAA) pattern:</p>
<ol>
<li><strong>Arrange</strong>: Set up the test conditions and inputs</li>
<li><strong>Act</strong>: Perform the action being tested</li>
<li><strong>Assert</strong>: Verify the expected outcomes</li>
</ol>
<p>Example:</p>
<pre><code class="language-kotlin">@Test
fun `example test using AAA pattern`() {
    // Arrange
    val input = "test input"
    val expectedOutput = "expected result"
    val testSubject = SystemUnderTest()

    // Act
    val result = testSubject.processInput(input)

    // Assert
    assertThat(result).isEqualTo(expectedOutput)
}
</code></pre>
<p>Use comments to clearly separate these sections in your tests:</p>
<pre><code class="language-kotlin">// Arrange
// Act
// Assert
</code></pre>
<h3 id="-test-naming"><a class="header" href="#-test-naming">📝 Test Naming</a></h3>
<p>Use descriptive test names that clearly indicate what is being tested. For JVM tests, use backticks:</p>
<pre><code class="language-kotlin">@Test
fun `method should return expected result when given valid input`() {
    // Test implementation
}
</code></pre>
<p>Note: Android instrumentation tests do not support backticks in test names. For these tests, use camelCase instead:</p>
<pre><code class="language-kotlin">@Test
fun methodShouldReturnExpectedResultWhenGivenValidInput() {
    // Test implementation
}
</code></pre>
<h2 id="-test-implementation"><a class="header" href="#-test-implementation">💻 Test Implementation</a></h2>
<h3 id="-fakes-over-mocks"><a class="header" href="#-fakes-over-mocks">🎭 Fakes over Mocks</a></h3>
<p>In this project, we prefer using fake implementations over mocks:</p>
<ul>
<li>✅ <strong>Preferred</strong>: Create fake/test implementations of interfaces or classes</li>
<li>❌ <strong>Avoid</strong>: Using mocking libraries to create mock objects</li>
</ul>
<p>Fakes provide better test reliability and are more maintainable in the long run. They also make tests more readable
and less prone to breaking when implementation details change.</p>
<p>Mocks can lead to brittle tests that are tightly coupled to the implementation details, making them harder to maintain.
They also negatively impact test performance, particularly during test initialization. Which can quickly become overwhelming
when an excessive number of tests includes mock implementations.</p>
<p>Example of a fake implementation:</p>
<pre><code class="language-kotlin">// Interface
interface DataRepository {
    fun getData(): List&lt;String&gt;
}

// Fake implementation for testing
class FakeDataRepository(
    // Allow passing initial data during construction
    initialData: List&lt;String&gt; = emptyList()
) : DataRepository {
    // Mutable property to allow changing data between tests
    var dataToReturn = initialData

    override fun getData(): List&lt;String&gt; {
        return dataToReturn
    }
}

// In test
@Test
fun `processor should transform data correctly`() {
    // Arrange
    val fakeRepo = FakeDataRepository(listOf("item1", "item2"))
    val testSubject = DataProcessor(fakeRepo)

    // Act
    val result = testSubject.process()

    // Assert
    assertThat(result).containsExactly("ITEM1", "ITEM2")
}
</code></pre>
<h3 id="-naming-conventions"><a class="header" href="#-naming-conventions">📋 Naming Conventions</a></h3>
<p>When writing tests, use the following naming conventions:</p>
<ul>
<li>Name the object under test as <code>testSubject</code> (not “sut” or other abbreviations)</li>
<li>Name fake implementations with a “Fake” prefix (e.g., <code>FakeDataRepository</code>)</li>
<li>Use descriptive variable names that clearly indicate their purpose</li>
</ul>
<h3 id="-assertions"><a class="header" href="#-assertions">✅ Assertions</a></h3>
<p>Use <a href="https://github.com/willowtreeapps/assertk" title="" target="_blank">AssertK</a> for assertions in tests:</p>
<pre><code class="language-kotlin">@Test
fun `example test`() {
    // Arrange
    val list = listOf("apple", "banana")

    // Act
    val result = list.contains("apple")

    // Assert
    assertThat(result).isTrue()
    assertThat(list).contains("banana")
}
</code></pre>
<p>Note: You’ll need to import the appropriate <a href="https://github.com/willowtreeapps/assertk" title="" target="_blank">AssertK</a> assertions:</p>
<ul>
<li><code>assertk.assertThat</code> for the base assertion function</li>
<li>Functions from the <code>assertk.assertions</code> namespace for specific assertion types (e.g., <code>import assertk.assertions.isEqualTo</code>, <code>import assertk.assertions.contains</code>, <code>import assertk.assertions.isTrue</code>, etc.)</li>
</ul>
<h2 id="-test-types"><a class="header" href="#-test-types">🧮 Test Types</a></h2>
<p>This section describes the different types of tests we use in the project. Each type serves a specific purpose in our testing strategy, and together they help ensure the quality and reliability of our codebase.</p>
<h3 id="-unit-tests"><a class="header" href="#-unit-tests">🔬 Unit Tests</a></h3>
<blockquote>
<p><strong>Unit tests verify that individual components work correctly in isolation.</strong></p>
</blockquote>
<p><strong>What to Test:</strong></p>
<ul>
<li>Single units of functionality</li>
<li>Individual methods or functions</li>
<li>Classes in isolation</li>
<li>Business logic</li>
<li>Edge cases and error handling</li>
</ul>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li>Independent (no external dependencies)</li>
<li>No reliance on external resources</li>
<li>Uses fake implementations for dependencies</li>
</ul>
<p><strong>Frameworks:</strong></p>
<ul>
<li>JUnit 4</li>
<li><a href="https://github.com/willowtreeapps/assertk" title="" target="_blank">AssertK</a> for assertions</li>
<li><a href="https://robolectric.org/" title="" target="_blank">Robolectric</a> (for Android framework classes)</li>
</ul>
<p><strong>Location:</strong></p>
<ul>
<li>Tests should be in the same module as the code being tested</li>
<li>Should be in the <code>src/test</code> directory or <code>src/{platformTarget}Test</code> for Kotlin Multiplatform</li>
<li>Tests should be in the same package as the code being tested</li>
</ul>
<p><strong>Contributor Expectations:</strong></p>
<ul>
<li>✅ All new code should be covered by unit tests</li>
<li>✅ Add tests that reproduce bugs when fixing issues</li>
<li>✅ Follow the AAA pattern (Arrange-Act-Assert)</li>
<li>✅ Use descriptive test names</li>
<li>✅ Prefer fake implementations over mocks</li>
</ul>
<h3 id="-integration-tests"><a class="header" href="#-integration-tests">🔌 Integration Tests</a></h3>
<blockquote>
<p><strong>Integration tests verify that components work correctly together.</strong></p>
</blockquote>
<p><strong>What to Test:</strong></p>
<ul>
<li>Interactions between components</li>
<li>Communication between layers</li>
<li>Data flow across multiple units</li>
<li>Component integration points</li>
</ul>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li>Tests multiple components together</li>
<li>May use real implementations when appropriate</li>
<li>Focuses on component boundaries</li>
</ul>
<p><strong>Frameworks:</strong></p>
<ul>
<li>JUnit 4 (for tests in <code>src/test</code>)</li>
<li><a href="https://github.com/willowtreeapps/assertk" title="" target="_blank">AssertK</a> for assertions</li>
<li><a href="https://robolectric.org/" title="" target="_blank">Robolectric</a> (for Android framework classes in <code>src/test</code>)</li>
<li>Espresso (for UI testing in <code>src/androidTest</code>)</li>
</ul>
<p><strong>Location:</strong></p>
<ul>
<li>Preferably in the <code>src/test</code> or <code>src/commonTest</code>, <code>src/{platformTarget}Test</code> for Kotlin Multiplatform</li>
<li>Only use <code>src/androidTest</code>, when there’s a specific need for Android dependencies</li>
</ul>
<p><strong>Why prefer <code>test</code> over <code>androidTest</code>:</strong></p>
<ul>
<li>JUnit tests run faster (on JVM instead of emulator/device)</li>
<li>Easier to set up and maintain</li>
<li>Better integration with CI/CD pipelines</li>
<li>Lower resource requirements</li>
<li>Faster feedback during development</li>
</ul>
<p><strong>When to use androidTest:</strong></p>
<ul>
<li>When testing functionality that depends on Android-specific APIs that are not available with Robolectric</li>
<li>When tests need to interact with the Android framework directly</li>
</ul>
<p><strong>Contributor Expectations:</strong></p>
<ul>
<li>✅ Add tests for features involving multiple components</li>
<li>✅ Focus on critical paths and user flows</li>
<li>✅ Be mindful of test execution time</li>
<li>✅ Follow the AAA pattern</li>
<li>✅ Use descriptive test names</li>
</ul>
<h3 id="-ui-tests"><a class="header" href="#-ui-tests">📱 UI Tests</a></h3>
<blockquote>
<p><strong>UI tests verify the application from a user’s perspective.</strong></p>
</blockquote>
<p><strong>What to Test:</strong></p>
<ul>
<li>User interface behavior</li>
<li>UI component interactions</li>
<li>Complete user flows</li>
<li>Screen transitions</li>
<li>Input handling and validation</li>
</ul>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li>Tests from user perspective</li>
<li>Verifies visual elements and interactions</li>
<li>Covers end-to-end scenarios</li>
</ul>
<p><strong>Frameworks:</strong></p>
<ul>
<li>Espresso for Android UI testing</li>
<li>Compose UI testing for Jetpack Compose</li>
<li>JUnit 4 as the test runner</li>
</ul>
<p><strong>Location:</strong></p>
<ul>
<li>In the <code>src/test</code> directory for Compose UI tests</li>
<li>In the <code>src/androidTest</code> directory for Espresso tests</li>
</ul>
<p><strong>Contributor Expectations:</strong></p>
<ul>
<li>✅ Add tests for new UI components and screens</li>
<li>✅ Focus on critical user flows</li>
<li>✅ Consider different device configurations</li>
<li>✅ Test both positive and negative scenarios</li>
<li>✅ Follow the AAA pattern</li>
<li>✅ Use descriptive test names</li>
</ul>
<h3 id="-screenshot-tests"><a class="header" href="#-screenshot-tests">📸 Screenshot Tests</a></h3>
<p><strong>⚠️ Work in Progress ⚠️</strong></p>
<blockquote>
<p><strong>Screenshot tests verify the visual appearance of UI components.</strong></p>
</blockquote>
<p><strong>What to Test:</strong></p>
<ul>
<li>Visual appearance of UI components</li>
<li>Layout correctness</li>
<li>Visual regressions</li>
<li>Theme and style application</li>
</ul>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li>Captures visual snapshots</li>
<li>Compares against reference images (<code>golden</code> images)</li>
<li>Detects unintended visual changes</li>
</ul>
<p><strong>Frameworks:</strong></p>
<ul>
<li>JUnit 4 as the test runner</li>
<li>Compose UI testing</li>
<li>Screenshot comparison tools (TBD)</li>
</ul>
<p><strong>Location:</strong></p>
<ul>
<li>Same module as the code being tested</li>
<li>In the <code>src/test</code> directory</li>
</ul>
<p><strong>Contributor Expectations:</strong></p>
<ul>
<li>✅ Add tests for new Composable UI components</li>
<li>✅ Verify correct rendering in different states</li>
<li>✅ Update reference screenshots for intentional changes</li>
</ul>
<h2 id="-test-types-we-dont-currently-have"><a class="header" href="#-test-types-we-dont-currently-have">🚫 Test Types We Don’t Currently Have</a></h2>
<blockquote>
<p><strong>This section helps contributors understand our testing strategy and future plans.</strong></p>
</blockquote>
<p><strong>End-to-End Tests</strong> ✨</p>
<ul>
<li>Full system tests verifying complete user journeys</li>
<li>Tests across multiple screens and features</li>
<li>Validates entire application workflows</li>
</ul>
<p><strong>Performance Tests</strong> ⚡</p>
<ul>
<li>Measures startup time, memory usage, responsiveness</li>
<li>Validates app performance under various conditions</li>
<li>Identifies performance bottlenecks</li>
</ul>
<p><strong>Accessibility Tests</strong> ♿</p>
<ul>
<li>Verifies proper content descriptions</li>
<li>Checks contrast ratios and keyboard navigation</li>
<li>Ensures app is usable by people with disabilities</li>
</ul>
<p><strong>Localization Tests</strong> 🌐</p>
<ul>
<li>Verifies correct translation display</li>
<li>Tests right-to-left language support</li>
<li>Validates date, time, and number formatting</li>
</ul>
<p><strong>Manual Test Scripts</strong> 📝</p>
<ul>
<li>Manual testing by QA team for exploratory testing</li>
<li>Ensures repeatable test execution</li>
<li>Documents expected behavior for manual tests</li>
</ul>
<h2 id="-running-tests"><a class="header" href="#-running-tests">🏃 Running Tests</a></h2>
<blockquote>
<p><strong>Quick commands to run tests in the project.</strong></p>
</blockquote>
<p>Run all tests:</p>
<pre><code class="language-bash">./gradlew test
</code></pre>
<p>Run tests for a specific module:</p>
<pre><code class="language-bash">./gradlew :module-name:test
</code></pre>
<p>Run Android instrumentation tests:</p>
<pre><code class="language-bash">./gradlew connectedAndroidTest
</code></pre>
<p>Run tests with coverage:</p>
<pre><code class="language-bash">./gradlew testDebugUnitTestCoverage
</code></pre>
<h2 id="-code-coverage"><a class="header" href="#-code-coverage">📊 Code Coverage</a></h2>
<blockquote>
<p><strong>⚠️ Work in Progress ⚠️</strong></p>
<p>This section is currently under development and will be updated with specific code coverage rules and guidelines.</p>
</blockquote>
<p>Code coverage helps us understand how much of our codebase is being tested. While we don’t currently have strict requirements, we aim for high coverage in critical components.</p>
<p><strong>Current Approach:</strong></p>
<ul>
<li>Focus on critical business logic</li>
<li>Prioritize user-facing features</li>
<li>No strict percentage requirements</li>
<li>Quality of tests over quantity</li>
</ul>
<p><strong>Future Guidelines (Coming Soon):</strong></p>
<ul>
<li>Code coverage targets by component type</li>
<li>Coverage report generation instructions</li>
<li>Interpretation guidelines</li>
<li>Exemptions for generated/simple code</li>
<li>CI/CD integration details</li>
</ul>
<p><strong>Remember:</strong> High code coverage doesn’t guarantee high-quality tests. Focus on writing meaningful tests that verify correct behavior, not just increasing coverage numbers.</p>
<footer id="last-change">Last change: <time datetime="2025-09-30">2025-09-30</time>, commit: <a href="https://github.com/thunderbird/thunderbird-android/commit/5e9af44">5e9af44</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../contributing/git-commit-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../contributing/translations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../contributing/git-commit-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../contributing/translations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../assets/theme/mermaid.min.js"></script>
        <script src="../assets/theme/mermaid-init.js"></script>
        <script src="../assets/theme/navigation.js"></script>
        <script src="../assets/theme/pagetoc.js"></script>



    </div>
    </body>
</html>
